@page "/godot-games"
@rendermode @(new InteractiveServerRenderMode(prerender: false))
@inject IJSRuntime JS
@implements IAsyncDisposable

<h3>CNM CiC 2025 – Godot Game</h3>

<div class="godot-host">
    <iframe @ref="_frame"
            class="godot-frame"
            src="/godot/CNM-CiC-2025-Godot/CNM-CiC-2025-Godot.html"
            title="CNM CiC 2025 Godot Game"
            loading="lazy"
            allow="autoplay; fullscreen; gamepad"
            sandbox="allow-scripts allow-same-origin allow-pointer-lock">
    </iframe>
</div>

<button class="btn btn-secondary mt-2" @onclick="EnterFullscreen">
    Fullscreen
</button>

@code {
    private ElementReference _frame;

    private async Task EnterFullscreen()
    {
        await JS.InvokeVoidAsync("godotHost.enterFullscreen", _frame);
    }

    public async ValueTask DisposeAsync()
    {
        await JS.InvokeVoidAsync("godotHost.stop", _frame);
    }
}
